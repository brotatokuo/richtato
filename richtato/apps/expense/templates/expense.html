{% extends "layout.html" %}
{% load static %}

{% block body %}
<div class="page-container">
    <div class="page-title">
        <h1>Expense</h1>
    </div>

    {% if years %}
    <div class="year-filter">
        <label for="year-filter">Year:</label>
        <select id="year-filter" name="year-filter">
            {% for year in years %}
            <option value="{{ year }}">{{ year }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="bar-chart">
        <canvas id="barChart"></canvas>
    </div>
    {% endif %}

    <div class="detailed-table" style="display: none;">
        <div class="table-header">
            <h2 class="table-title" id="detailed-table-title-1"></h2>
            <h2 class="table-title" id="detailed-table-title-2"></h2>
        </div>

        <table class="styled-table" id="details-table-spendings">
            <thead>
            </thead>
            <tbody>
                <!-- Rows will be inserted here dynamically -->
            </tbody>
        </table>

        <button class="btn-secondary editButton" id="detailsTableEditButton">Edit</button>
    </div>
    <br>
    <br>
    <br>
    <br>
    <div class="login-form">
        <h2 class="subtitle">Add Expense</h2>
        <form method="post" action="{% url 'add_expense_entry' %}">
            {% csrf_token %}

            <!-- Account field -->
            <div class="form-group">
                <label for="account">Card:</label>
                <select class="form-control" id="account" name="account" required>
                    {% for account in transaction_accounts %}
                    <option value="{{ account }}">{{ account }}</option>
                    {% endfor %}
                </select>
            </div>

            <br>

            <!-- Description field -->
            <div class="form-group">
                <label for="description">Description:</label>
                <input class="form-control" type="text" id="description" name="description" required>
            </div> <!-- Closed the div here -->

            <br>

            <!-- Amount field -->
            <div class="form-group">
                <label for="amount">Amount:</label>
                <input class="form-control" id='balance-input' type="number" step="0.01" id="amount" name="amount"
                    required>
            </div> <!-- Closed the div here -->

            <br>

            <!-- Date field -->
            <div class="form-group">
                <label for="date">Date:</label>
                <input class="form-control" type="date" id="balance-date" name="balance-date" value="{{ today_date }}"
                    required>
            </div> <!-- Closed the div here -->

            <br>

            <!-- Category field -->
            <div class="form-group">
                <label for="category">Category:</label>
                <select class="form-control" id="category" name="category" required>
                    {% for category in category_list %}
                    <option value="{{ category }}">{{ category }}</option>
                    {% endfor %}
                </select>
            </div> <!-- Closed the div here -->

            <br>

            <!-- Submit button -->
            <button type="submit" class="btn-secondary">Add Entry</button>
        </form>
    </div>
</div>

{% endblock %}