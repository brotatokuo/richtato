<!DOCTYPE html>
<html lang="en">
  <head>
    {% load static %}
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="{% static 'css/all.min.css' %}" />
    <link rel="stylesheet" href="{% static 'css/main.css' %}" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;500&display=swap"
    />
    <link
      rel="icon"
      type="image/png"
      href="{% static 'images/richtato.ico' %}"
    />

    <link
      rel="stylesheet"
      href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.datatables.net/buttons/2.4.1/css/buttons.dataTables.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.datatables.net/select/1.7.0/css/select.dataTables.min.css"
    />

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/select/1.7.0/js/dataTables.select.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{% static 'js/utils/helpers.js' %}"></script>
    <script src="{% static 'js/utils/common.js' %}"></script>
    <script src="{% static 'js/utils/api.js' %}"></script>
    <script src="{% static 'js/components/richTable.js' %}"></script>

    <title>{% block title %}My Website{% endblock %}</title>
  </head>

  <body>
    <div class="loader">
      <h1>Loading<span>....</span></h1>
    </div>
    <div class="page-content index-page">
      <div class="sidebar" id="sidebar">
        <!-- Brand in sidebar -->
        <div class="sidebar-brand">
          <a href="{% url 'dashboard' %}" class="sidebar-brand-link">
            <img
              src="{% static 'images/richtato.ico' %}"
              alt="Richtato Logo"
              class="sidebar-brand-logo"
            />
            <span class="sidebar-brand-name">Richtato</span>
          </a>
        </div>

        <ul>
          <li>
            <a href="{% url 'dashboard' %}" class="sidebar-link">
              <i class="fa-solid fa-money-bill-trend-up fa-fw"></i>
              <span>Dashboard</span>
            </a>
          </li>

          <li>
            <a href="{% url 'table' %}" class="sidebar-link">
              <i class="fa-solid fa-table fa-fw"></i> <span>Data</span>
            </a>
          </li>

          <li>
            <a href="{% url 'upload' %}" class="sidebar-link">
              <i class="fa-solid fa-cloud-arrow-up fa-fw"></i>
              <span>Upload</span>
            </a>
          </li>

          <li>
            <a href="{% url 'account_settings' %}" class="sidebar-link">
              <i class="fa-solid fa-gear fa-fw"></i>
              <span>Settings</span>
            </a>
          </li>
        </ul>

        <!-- Sticky bottom section for profile, logout, and dark mode -->
        <div class="sidebar-bottom-actions">
          <ul class="sidebar-bottom-list">
            {% if user.is_authenticated %}
            <li>
              <a href="{% url 'profile' %}" class="sidebar-link">
                <i class="fa-regular fa-user fa-fw"></i>
                <span class="user-info">
                  <span class="user-label">Profile</span>
                  <span class="username">{{ user.username }}</span>
                </span>
              </a>
            </li>
            <li>
              <a href="{% url 'logout' %}" class="sidebar-link">
                <i class="fa-solid fa-right-from-bracket"></i>
                <span>Logout</span>
              </a>
            </li>
            {% endif %}
            <li>
              <button
                id="theme-toggle-btn"
                class="sidebar-link sidebar-theme-toggle-btn"
                title="Toggle Dark/Light Mode"
                type="button"
              >
                <i class="fa-solid fa-moon" id="theme-icon"></i>
                <span>Dark mode</span>
              </button>
            </li>
          </ul>
        </div>
      </div>
      <main id="main">
        <div class="header">
          <i class="fa-solid fa-bars bar-item" id="hamburger"></i>

          <!-- Mobile brand - only visible on mobile -->
          <div class="mobile-brand">
            <a href="{% url 'index' %}" class="mobile-brand-link">
              <img
                src="{% static 'images/richtato.ico' %}"
                alt="Richtato Logo"
                class="mobile-brand-logo"
              />
              <span class="mobile-brand-name">Richtato</span>
            </a>
          </div>
        </div>
        {% block content %}
        <!-- Content to be filled by child templates -->
        {% endblock %}
      </main>
    </div>

    <script src="{% static 'js/components/navigation.js' %}"></script>
    <script src="{% static 'js/components/sidebar.js' %}"></script>
    <script src="{% static 'js/components/themeToggle.js' %}"></script>
  </body>
</html>
